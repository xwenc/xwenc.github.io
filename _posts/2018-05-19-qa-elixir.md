---
title: All Questions - Answers about Elixir
layout: post
tags: elixir
---

* **如何快速上手？**

  [https://elixir-lang.org/getting-started/introduction.html](https://elixir-lang.org/getting-started/introduction.html) 这里有些快速上手的简介，可以随时查些语法，有啥不懂的随时喊我。

* **如何拼接字符串？**

  `bid.user.account.user_name <> "You"`
	`"#{bid.user.account.user_name}  You"`
	
	还有两个和其他语言不太一样的地方，
	`foo = [1,2,3] 
	[0 | foo]
	//result [0,1,2,3]
	`
	`foo = [1,2,3] bar=[4,5,6]
  foo ++ bar 
	//result [1,2,3,4,5,6]
	`
	
* **:leaseprice 不是个字符串?**

   不是，这种东西在 elixir 和 ruby 里是个独立的变量类型，叫 symbol。
 
* **Form里怎么把 f 传给局部模板呢？**

  render 模板传变量有两种：
	`<%= render "_coupon.html", coupon: @product.coupon, current_user: @current_user %>`
	如果传f,就是这样
	`<%= render "_coupon.html",  f: f %>`
	在局部模板中就可以使用f了，注意在局部模板中得通过 @ 使用变量， 例如 @f。
* **f是什么？**

  主模版中 fn f -> ，相当于在回调函数中，使用了  f  这个局部变量，所以如果在主模版    的回调中，就可以直接 input f 这样用，
`<%= render "xxx", f: f %>` 第一个f代表局部模版中的模版变量，第二个代表在当前作用域中的局部变量，也就是回调中的 f，
这样在局部模版中使用这个 模版变量 的时候，就可以 @f，这样来使用
如果是 `<%= render "xxx", form: f %>`，那在局部模版中使用 "form" 这个模版变量，就得 @form 这样来用了
现在的情况，局部模版的 模版变量 和 主模版的局部变量刚好名字一样，都是 f。

* **elixir 跟 ruby是啥关系， ruby的语法 elixir 都支持是吗？**

	elixir 参考了 ruby 的部分语法，但是 elixir 实在 erlang 虚拟机上开发的纯函数式语言，没对象，没循环，会编译成 erlang，然后底层使用的 actor 模型进行并发的，elixir 和 erlang 的精髓就是 actor 并发模型，这东西基本算是分布式的主流，据说是移动电话的电信交换器就是用这东西开发的。
	
* **Decimal是个方法吗？**

	在 elixir 类似 Decimal 这种大写开头的叫 module，里面包含方法。

* `|>` **这是啥意思？**

	使用 module 的方法，就要 module-name.fun-name，类似 Decimal.mult
`Decimal.mult(p.amount, Decimal.new(p.units)) |> Decimal.round(2) |> Decimal.to_string(:normal)`
  1. Decimal.new 将  p.units 这个 int 转换为了 decimal
  2. Decimal.mult 将两个 decimals 相乘
  3. Decimal.round 保留两位精度
  4. Decimal.to_string(:normal) 转换为无指数的字符串，类似 10000.00，如果是 Decimal.to_string(: raw) 就是有指数的，类似 1e3 这种。
  
  特别说一下 管道符 "|>" ，符号左边的会作为符号右边的函数的第一个参数，
类似 xxx |> Decimal.round(2) ，其实就是 Decimal.round(xxx, 2)
类似于面向对象语法里的 对象链式调用， foo.bar.baz，函数式里通过这种方式避免套括号。

*  `^x`  **这是啥意思？**
    
      是这样的这里如果直接使用 x ，那么相当于把 case 里的值，这里是 10 赋值给了 x ，   如果使用了 ^x，就是使用外部的变量 x 的值和 case 的 10 就行比较

*  **管道符的话，会不会出现异步的情况，会不会发生阻塞？**
   
	 一般情况下不会，elixir 并发用的叫做 actor 的模型，如果管道中有一个东西是需要实时回复的同步的 actor 的话，估计可能会阻塞，之后如果看到 gen_server 会有相关的东西，关于actor模型参考：
	 [https://www.jianshu.com/p/449850aa8e82](https://www.jianshu.com/p/449850aa8e82)
	 
	 [https://www.brianstorti.com/the-actor-model/](https://www.brianstorti.com/the-actor-model/)

* ** list 和 tuple 有什么区别 **
classes \\ [] 是代表默认参数是个空的 list，List 这个 module 里的方法都是操作 list 的，就是 [1, 2, 3]，elixir 里面没数组，只有 list
[https://hexdocs.pm/elixir/List.html](https://hexdocs.pm/elixir/List.html)
需要哪个函数，可以直接查用法。
[https://hexdocs.pm/elixir/Tuple.html](https://hexdocs.pm/elixir/Tuple.html)
这个和 list 类似，但是有几个区别
 1. list 其实就是个数据结构中的链表，["foo" | foo] 其实就是在链表头添加一个新的元素
 2. tuple 其实就是个数据结构中固定元素大小的数组
 3. list 用来存储大量数据，和其他语言的 array 类似
 4. tuple 一般存储少量数据，一般作为函数的参数和返回值来用。

 list 放元素是直接放到第一个位置，所以时间复杂度是 O(1)，但是 tuple 是放到最后一个位置，时间复杂度是 O(n)，tuple 也可以放新东西，但是会没有 list 快
但是固定元素的 tuple，读取起来非常快，是 O(1)